var KavimoUploader;(()=>{"use strict";var e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e){var t=function(e){for(var t,i="0123456789ABCDEF",s="",n=0;n<e.length;n++)t=e.charCodeAt(n),s+=i.charAt(t>>>4&15)+i.charAt(15&t);return s}(function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i=1732584193,s=-271733879,l=-1732584194,u=271733878,f=0;f<e.length;f+=16){var p=i,d=s,c=l,v=u;s=a(s=a(s=a(s=a(s=o(s=o(s=o(s=o(s=r(s=r(s=r(s=r(s=n(s=n(s=n(s=n(s,l=n(l,u=n(u,i=n(i,s,l,u,e[f+0],7,-680876936),s,l,e[f+1],12,-389564586),i,s,e[f+2],17,606105819),u,i,e[f+3],22,-1044525330),l=n(l,u=n(u,i=n(i,s,l,u,e[f+4],7,-176418897),s,l,e[f+5],12,1200080426),i,s,e[f+6],17,-1473231341),u,i,e[f+7],22,-45705983),l=n(l,u=n(u,i=n(i,s,l,u,e[f+8],7,1770035416),s,l,e[f+9],12,-1958414417),i,s,e[f+10],17,-42063),u,i,e[f+11],22,-1990404162),l=n(l,u=n(u,i=n(i,s,l,u,e[f+12],7,1804603682),s,l,e[f+13],12,-40341101),i,s,e[f+14],17,-1502002290),u,i,e[f+15],22,1236535329),l=r(l,u=r(u,i=r(i,s,l,u,e[f+1],5,-165796510),s,l,e[f+6],9,-1069501632),i,s,e[f+11],14,643717713),u,i,e[f+0],20,-373897302),l=r(l,u=r(u,i=r(i,s,l,u,e[f+5],5,-701558691),s,l,e[f+10],9,38016083),i,s,e[f+15],14,-660478335),u,i,e[f+4],20,-405537848),l=r(l,u=r(u,i=r(i,s,l,u,e[f+9],5,568446438),s,l,e[f+14],9,-1019803690),i,s,e[f+3],14,-187363961),u,i,e[f+8],20,1163531501),l=r(l,u=r(u,i=r(i,s,l,u,e[f+13],5,-1444681467),s,l,e[f+2],9,-51403784),i,s,e[f+7],14,1735328473),u,i,e[f+12],20,-1926607734),l=o(l,u=o(u,i=o(i,s,l,u,e[f+5],4,-378558),s,l,e[f+8],11,-2022574463),i,s,e[f+11],16,1839030562),u,i,e[f+14],23,-35309556),l=o(l,u=o(u,i=o(i,s,l,u,e[f+1],4,-1530992060),s,l,e[f+4],11,1272893353),i,s,e[f+7],16,-155497632),u,i,e[f+10],23,-1094730640),l=o(l,u=o(u,i=o(i,s,l,u,e[f+13],4,681279174),s,l,e[f+0],11,-358537222),i,s,e[f+3],16,-722521979),u,i,e[f+6],23,76029189),l=o(l,u=o(u,i=o(i,s,l,u,e[f+9],4,-640364487),s,l,e[f+12],11,-421815835),i,s,e[f+15],16,530742520),u,i,e[f+2],23,-995338651),l=a(l,u=a(u,i=a(i,s,l,u,e[f+0],6,-198630844),s,l,e[f+7],10,1126891415),i,s,e[f+14],15,-1416354905),u,i,e[f+5],21,-57434055),l=a(l,u=a(u,i=a(i,s,l,u,e[f+12],6,1700485571),s,l,e[f+3],10,-1894986606),i,s,e[f+10],15,-1051523),u,i,e[f+1],21,-2054922799),l=a(l,u=a(u,i=a(i,s,l,u,e[f+8],6,1873313359),s,l,e[f+15],10,-30611744),i,s,e[f+6],15,-1560198380),u,i,e[f+13],21,1309151649),l=a(l,u=a(u,i=a(i,s,l,u,e[f+4],6,-145523070),s,l,e[f+11],10,-1120210379),i,s,e[f+2],15,718787259),u,i,e[f+9],21,-343485551),i=h(i,p),s=h(s,d),l=h(l,c),u=h(u,v)}return Array(i,s,l,u)}(function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t}(e),8*e.length)));return t.toLowerCase()}function s(e,t,i,s,n,r){return h(function(e,t){return e<<t|e>>>32-t}(h(h(t,e),h(s,r)),n),i)}function n(e,t,i,n,r,o,a){return s(t&i|~t&n,e,t,r,o,a)}function r(e,t,i,n,r,o,a){return s(t&n|i&~n,e,t,r,o,a)}function o(e,t,i,n,r,o,a){return s(t^i^n,e,t,r,o,a)}function a(e,t,i,n,r,o,a){return s(i^(t|~n),e,t,r,o,a)}function h(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}e.r(t),e.d(t,{build:()=>y,version:()=>w});var l=window.navigator.msPointerEnabled;function u(e){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/Chrome/.test(window.navigator.userAgent)||/Firefox/.test(window.navigator.userAgent)||/Edge/.test(window.navigator.userAgent),this.files=[],this.folders={tree:[],flat:[]},this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",fileTypes:[],progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,413,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:p},this.opts={},this.events={};var t=this;this.onDrop=function(e){t.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault();var i=e.dataTransfer;i.items&&i.items[0]&&i.items[0].webkitGetAsEntry?t.webkitReadDataTransfer(e):t.addFiles(i.files,e)},this.preventEvent=function(e){e.preventDefault()},this.opts=u.extend({},this.defaults,e||{})}}function f(e,t,i){this.flowObj=e,this.bytes=null,this.file=t,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this.uniqueIdentifier=void 0===i?e.generateUniqueIdentifier(t):i,this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function p(e,t,i,s,n){var r="slice";e.file.slice?r="slice":e.file.mozSlice?r="mozSlice":e.file.webkitSlice&&(r="webkitSlice"),n.readFinished(e.file[r](t,i,s))}function d(e,t,i){this.flowObj=e,this.fileObj=t,this.offset=i,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.flowObj.opts.chunkSize,this.startByte=this.offset*this.chunkSize,this.computeEndByte=function(){var e=Math.min(this.fileObj.size,(this.offset+1)*this.chunkSize);return this.fileObj.size-e<this.chunkSize&&!this.flowObj.opts.forceChunkSize&&(e=this.fileObj.size),e},this.endByte=this.computeEndByte(),this.xhr=null;var s=this;this.event=function(e,t){(t=Array.prototype.slice.call(arguments)).unshift(s),s.fileObj.chunkEvent.apply(s.fileObj,t)},this.progressHandler=function(e){e.lengthComputable&&(s.loaded=e.loaded,s.total=e.total),s.event("progress",e)},this.testHandler=function(e){var t=s.status(!0);"error"===t?(s.event(t,s.message()),s.flowObj.uploadNextChunk()):"success"===t?(s.tested=!0,s.event(t,s.message()),s.flowObj.uploadNextChunk()):s.fileObj.paused||(s.tested=!0,s.send())},this.doneHandler=function(e){var t=s.status();if("success"===t||"error"===t)delete this.data,s.event(t,s.message()),s.flowObj.uploadNextChunk();else{s.event("retry",s.message()),s.pendingRetry=!0,s.abort(),s.retries++;var i=s.flowObj.opts.chunkRetryInterval;null!==i?setTimeout((function(){s.send()}),i):s.send()}}}function c(e,t){return"function"==typeof e&&(t=Array.prototype.slice.call(arguments),e=e.apply(null,t.slice(1))),e}function v(e,t){setTimeout(e.bind(t),0)}function g(e,t){return m(arguments,(function(t){t!==e&&m(t,(function(t,i){e[i]=t}))})),e}function m(e,t,i){var s;if(e)if(void 0!==e.length){for(s=0;s<e.length;s++)if(!1===t.call(i,e[s],s))return}else for(s in e)if(e.hasOwnProperty(s)&&!1===t.call(i,e[s],s))return}u.prototype={on:function(e,t){e=e.toLowerCase(),this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)},off:function(e,t){var i,s,n;void 0!==e?(e=e.toLowerCase(),void 0!==t?this.events.hasOwnProperty(e)&&(s=t,(n=(i=this.events[e]).indexOf(s))>-1&&i.splice(n,1)):delete this.events[e]):this.events={}},fire:function(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();var i=!1;return this.events.hasOwnProperty(e)&&m(this.events[e],(function(e){i=!1===e.apply(this,t.slice(1))||i}),this),"catchall"!=e&&(t.unshift("catchAll"),i=!1===this.fire.apply(this,t)||i),!i},webkitReadDataTransfer:function(e){var t=this,s=e.dataTransfer.items.length,n=[],r={tree:[],flat:[]};function o(e){var t=[];if(e.isFile){var i=e.fullPath;e.file((function(e){h(e,i)}),l)}else if(e.isDirectory){var n=e.createReader(),f=function(e){s+=e.length,e.forEach((function(e){if(e.isFile){var i=e.fullPath;e.file((function(e){h(e,i)}),l)}else if(e.isDirectory){let i=a(e);i.items=o(e),t.push(i),r.flat.push(i)}})),e.length>0?n.readEntries(f):u()};n.readEntries(f)}return t}function a(e){let t=e.fullPath.substring(1);return{id:i(t),path:t,name:e.name,items:[]}}function h(e,t){e.relativePath=t.substring(1),n.push(e),u()}function l(e){throw u(),e}function u(){0==--s&&(t.addFiles(n,e,!1),t.folders=r)}m(e.dataTransfer.items,(function(e){var t=e.webkitGetAsEntry();if(t)if(t.isFile)h(e.getAsFile(),t.fullPath);else{var i=a(t);i.items=o(t),r.flat.push(i),r.tree.push(i)}else u()}))},generateUniqueIdentifier:function(e){var t=this.opts.generateUniqueIdentifier;if("function"==typeof t)return t(e);var i=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+i.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(e){var t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(m(this.files,(function(e){return!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0})),t))return t;if(m(this.files,(function(e){if(e.paused||m(e.chunks,(function(e){if("pending"===e.status())return e.send(),t=!0,!1})),t)return!1})),t)return!0;var i=!1;return m(this.files,(function(e){if(!e.isComplete())return i=!0,!1})),i||e||v((function(){this.fire("complete")}),this),!1},assignBrowse:function(e,t,i,s){e instanceof Element&&(e=[e]),m(e,(function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:((n=document.createElement("input")).setAttribute("type","file"),g(n.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),e.appendChild(n),e.addEventListener("click",(function(){n.click()}),!1)),this.opts.singleFile||i||n.setAttribute("multiple","multiple"),this.opts.fileTypes&&this.opts.fileTypes.length>=1&&n.setAttribute("accept",this.opts.fileTypes.map((function(e){return(e=e.replace(/\s/g,"").toLowerCase()).match(/^[^.][^/]+$/)&&(e="."+e),e})).join(",")),t&&n.setAttribute("webkitdirectory","webkitdirectory"),m(s,(function(e,t){n.setAttribute(t,e)}));var r=this;n.addEventListener("change",(function(e){e.target.value&&(r.addFiles(e.target.files,e),e.target.value="")}),!1)}),this)},assignDrop:function(e){void 0===e.length&&(e=[e]),m(e,(function(e){e.addEventListener("dragover",this.preventEvent,!1),e.addEventListener("dragenter",this.preventEvent,!1),e.addEventListener("drop",this.onDrop,!1)}),this)},unAssignDrop:function(e){void 0===e.length&&(e=[e]),m(e,(function(e){e.removeEventListener("dragover",this.preventEvent),e.removeEventListener("dragenter",this.preventEvent),e.removeEventListener("drop",this.onDrop)}),this)},isUploading:function(){var e=!1;return m(this.files,(function(t){if(t.isUploading())return e=!0,!1})),e},_shouldUploadNext:function(){var e=0,t=!0,i=this.opts.simultaneousUploads;return m(this.files,(function(s){m(s.chunks,(function(s){if("uploading"===s.status()&&++e>=i)return t=!1,!1}))})),t&&e},upload:function(){var e=this._shouldUploadNext();if(!1!==e){this.fire("uploadStart");for(var t=!1,i=1;i<=this.opts.simultaneousUploads-e;i++)t=this.uploadNextChunk(!0)||t;t||v((function(){this.fire("complete")}),this)}},resume:function(){m(this.files,(function(e){e.isComplete()||e.resume()}))},pause:function(){m(this.files,(function(e){e.pause()}))},cancel:function(){for(var e=this.files.length-1;e>=0;e--)this.files[e].cancel()},progress:function(){var e=0,t=0;return m(this.files,(function(i){e+=i.progress()*i.size,t+=i.size})),t>0?e/t:0},addFile:function(e,t){this.addFiles([e],t)},addFiles:function(e,t,s){var n=[];m(e,(function(e){if((!l||l&&e.size>0)&&(e.size%4096!=0||"."!==e.name&&"."!==e.fileName)){var i=this.generateUniqueIdentifier(e);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(i)){var s=new f(this,e,i);this.fire("fileAdded",s,t)&&n.push(s)}}}),this);var r={tree:[],flat:[]};if(void 0===s){const e=n.reduce((function(e,t){let i=t.relativePath.split("/");return i.pop(),i.length>0&&e.push(i.join("/")),e}),[]),t={},s=(e,t)=>{const s=t=>({id:i(e),name:t,path:e,items:[]}),n=e.split("/");if(t.name||(r.flat.push(s(n[0])),Object.assign(t,s(n[0]))),t.name!==n[0])throw new Error(`Root folder is not "${t.name}"`);n.shift(),n.reduce(((e,t)=>{const i=e.items.find((e=>e.name===t));if(i)return i;const n=s(t);return r.flat.push(n),e.items.push(n),n}),t)};e.forEach((e=>s(e,t))),r.tree=[t]}this.fire("filesAdded",n,t)&&(m(n,(function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)}),this),this.folders=r,this.fire("filesSubmitted",n,t))},removeFile:function(e){for(var t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort(),this.fire("fileRemoved",e))},getFromUniqueIdentifier:function(e){var t=!1;return m(this.files,(function(i){i.uniqueIdentifier===e&&(t=i)})),t},getSize:function(){var e=0;return m(this.files,(function(t){e+=t.size})),e},sizeUploaded:function(){var e=0;return m(this.files,(function(t){e+=t.sizeUploaded()})),e},timeRemaining:function(){var e=0,t=0;return m(this.files,(function(i){i.paused||i.error||(e+=i.size-i.sizeUploaded(),t+=i.averageSpeed)})),e&&!t?Number.POSITIVE_INFINITY:e||t?Math.floor(e/t):0}},f.prototype={measureSpeed:function(){var e=Date.now()-this._lastProgressCallback;if(e){var t=this.flowObj.opts.speedSmoothingFactor,i=this.sizeUploaded();this.currentSpeed=Math.max((i-this._prevUploadedSize)/e*1e3,0),this.averageSpeed=t*this.currentSpeed+(1-t)*this.averageSpeed,this._prevUploadedSize=i}},chunkEvent:function(e,t,i){switch(t){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,i,e),this.flowObj.fire("error",i,this,e);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,i,e));break;case"retry":this.flowObj.fire("fileRetry",this,e)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(e){this.currentSpeed=0,this.averageSpeed=0;var t=this.chunks;e&&(this.chunks=[]),m(t,(function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())}),this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){"function"==typeof this.flowObj.opts.initFileFn&&this.flowObj.opts.initFileFn(this),this.abort(!0),this.error=!1,this._prevProgress=0;for(var e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,t=Math.max(e(this.size/this.flowObj.opts.chunkSize),1),i=0;i<t;i++)this.chunks.push(new d(this.flowObj,this,i))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var e=0;m(this.chunks,(function(t){e+=t.progress()*(t.endByte-t.startByte)}));var t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.9999?1:t),this._prevProgress},isUploading:function(){var e=!1;return m(this.chunks,(function(t){if("uploading"===t.status())return e=!0,!1})),e},isComplete:function(){var e=!1;return m(this.chunks,(function(t){var i=t.status();if("pending"===i||"uploading"===i||"reading"===i||1===t.preprocessState||1===t.readState)return e=!0,!1})),!e},sizeUploaded:function(){var e=0;return m(this.chunks,(function(t){e+=t.sizeUploaded()})),e},timeRemaining:function(){if(this.paused||this.error)return 0;var e=this.size-this.sizeUploaded();return e&&!this.averageSpeed?Number.POSITIVE_INFINITY:e||this.averageSpeed?Math.floor(e/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}},d.prototype={getParams:function(){return{ChunkNumber:this.offset+1,ChunkSize:this.flowObj.opts.chunkSize,CurrentChunkSize:this.endByte-this.startByte,TotalSize:this.fileObj.size,Identifier:this.fileObj.uniqueIdentifier,Filename:this.fileObj.name,RelativePath:this.fileObj.relativePath,TotalChunks:this.fileObj.chunks.length}},getTarget:function(e,t){return e.indexOf("?")<0?e+="?":e+="&",e+t.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var e=c(this.flowObj.opts.testMethod,this.fileObj,this),t=this.prepareXhrRequest(e,!0);this.xhr.send(t)},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(e){this.readState=2,this.bytes=e,this.send()},send:function(){var e=this.flowObj.opts.preprocess,t=this.flowObj.opts.readFileFn;if("function"==typeof e)switch(this.preprocessState){case 0:return this.preprocessState=1,void e(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void t(this.fileObj,this.startByte,this.endByte,this.fileObj.file.type,this);case 1:return}if(!this.flowObj.opts.testChunks||this.tested){this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var i=c(this.flowObj.opts.uploadMethod,this.fileObj,this),s=this.prepareXhrRequest(i,!1,this.flowObj.opts.method,this.bytes);this.xhr.send(s)}else this.test()},abort:function(){var e=this.xhr;this.xhr=null,e&&e.abort()},status:function(e){return 1===this.readState?"reading":this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!e&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var e=this.endByte-this.startByte;return"success"!==this.status()&&(e=this.progress()*e),e},prepareXhrRequest:function(e,t,i,s){var n=c(this.flowObj.opts.query,this.fileObj,this,t);n=g(n,this.getParams());var r=c(this.flowObj.opts.target,this.fileObj,this,t),o=null;if("GET"===e||"octet"===i){var a=[];m(n,(function(e,t){a.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))})),r=this.getTarget(r,a),o=s||null}else o=new FormData,m(n,(function(e,t){o.append(t,e)})),void 0!==s&&o.append(this.flowObj.opts.fileParameterName,s,this.fileObj.file.name);return this.xhr.open(e,r,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,m(c(this.flowObj.opts.headers,this.fileObj,this,t),(function(e,t){this.xhr.setRequestHeader(t,e)}),this),o}},u.evalOpts=c,u.extend=g,u.each=m,u.FlowFile=f,u.FlowChunk=d,u.version="2.13.0";const b=u;function w(){return"2.0.1"}function y(e){(e=e||{}).action=e.action||"",e.headers=e.headers||{},e.accessToken=e.accessToken||"",e.lineID=e.lineID||null,e.folderID=e.folderID||0,e.assignBrowseFile=e.assignBrowseFile||[],e.assignBrowseFolder=e.assignBrowseFolder||[],e.assignDrop=e.assignDrop||Element,e.fileParameterName=e.fileParameterName||"media",e.chunkSize=e.chunkSize||1048576,e.successStatuses=e.successStatuses||[200],e.maxChunkRetries=e.maxChunkRetries||3,e.singleFile=e.singleFile||!1,e.fileTypes=e.fileTypes||["avi","mp4","m4v","webm","flv","wmv","mkv","mpeg","mpg","f4v","mov","vob","ts","aac","wav","wave","mp3","aiff","wma","opus","flac","ogg","m4a"];var t=new b({target:e.action,headers:e.headers,withCredentials:!0,fileTypes:e.fileTypes,fileParameterName:e.fileParameterName,chunkSize:e.chunkSize,successStatuses:e.successStatuses,maxChunkRetries:e.maxChunkRetries,singleFile:e.singleFile,progressCallbacksInterval:300,speedSmoothingFactor:.5,initFileFn:function(t){let s=t.relativePath.substring(0,t.relativePath.lastIndexOf("/"));t._FID=i(s),t._rawFID=s,t.getName=function(){return t.name.replace(/\.[^/.]+$/,"")},t.query={folder_id:e.folderID,line_id:e.lineID},void 0!==e.query&&"object"==typeof e.query&&(t.query=Object.assign(t.query,e.query)),void 0!==e.initFileFn&&e.initFileFn(t)},query:function(e){return e.query}});return t.support?(t.assignBrowse(e.assignBrowseFile,!1),t.assignBrowse(e.assignBrowseFolder,!0),t.assignDrop(e.assignDrop),void 0!==e.onDragOver&&(e.assignDrop.addEventListener("dragover",e.onDragOver,!1),e.assignDrop.addEventListener("dragenter",e.onDragOver,!1)),void 0!==e.onDragLeave&&(e.assignDrop.addEventListener("dragleave",e.onDragLeave,!1),e.assignDrop.addEventListener("drop",e.onDragLeave,!1)),void 0!==e.onInput&&t.on("filesSubmitted",(function(i){for(let t in i){let s=i[t].getExtension();s&&""!=s&&-1!=e.fileTypes.indexOf(s)||i[t].cancel()}setTimeout((function(){e.onInput({files:t.files,folders:t.folders},t)}),100)})),void 0!==e.onProgress&&t.on("fileProgress",(function(t,i){e.onProgress(t,i)})),void 0!==e.onSuccess&&t.on("fileSuccess",(function(t,i,s){i=i&&""!=i?JSON.parse(i):i,e.onSuccess(t,i,s)})),void 0!==e.onFileError&&t.on("fileError",(function(t,i,s){i=i&&""!=i?JSON.parse(i):i,e.onFileError(t,i,s)}))):void 0!==e.unSupport&&e.unSupport(),t}KavimoUploader=t})();